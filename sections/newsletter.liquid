<section class="newsletter">
  <div class="container">
    <div class="row">
      <div class="col-lg-12 col-md-12 col-sm-12">
        <div class="newsletter__container">
          <div class="newsletter__wrapper">
            <div class="newsletter__content">
              {% form 'customer', class: 'newsletter__form text-center' %}

                {% if section.settings.newsletter_heading != blank %}
                  <label class="newsletter__signup--title">{{ section.settings.newsletter_heading | escape }}</label>
                {% endif %}

                {% if section.settings.newsletter_text != blank %}
                  <label class="newsletter__signup--subtitle">{{ section.settings.newsletter_text | escape }}</label>
                {% endif %}

                <div class="input-wrapper d-flex align-items-center mx-auto {% if form.errors %} input-group--error{% endif %}">
                  <input 
                  id="NewsletterForm--{{ section.id }}"
                  type="email"
                  name="contact[email]"
                  placeholder="email address" 
                  class="newsletter__input"
                  value="{{ form.email }}"
                  aria-required="true"
                  autocorrect="off"
                  autocapitalize="off"
                  autocomplete="email"
                  {% if form.errors %}
                    autofocus
                    aria-invalid="true"
                    aria-describedby="Newsletter-error--{{ section.id }}"
                  {% elsif form.posted_successfully? %}
                    aria-describedby="Newsletter-success--{{ section.id }}"
                  {% endif %}
                    placeholder="{{ 'newsletter.label' | t }}"
                    required
                  >
                  <input type="submit" class="newsletter__button" id="Subscribe" value="enter" name="commit">
                </div>

                {%- if form.errors -%}
                  <small class="newsletter-form__message form__message" id="Newsletter-error--{{ section.id }}">{% render 'icon-error' %}{{ form.errors.translated_fields['email'] | capitalize }} {{ form.errors.messages['email'] }}</small>
                {%- endif -%}
              
              {%- if form.posted_successfully? -%}
                <h3 class="newsletter-form__message newsletter-form__message--success form__message" id="Newsletter-success--{{ section.id }}" tabindex="-1" autofocus>{% render 'icon-success' %}{{ 'newsletter.success' | t }}</h3>
              {%- endif -%}

              {% endform %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Newsletter",
  "settings": [
    {
      "type": "text",
      "id": "newsletter_heading",
      "label": "Newsletter heading",
      "default": "Keep in touch with us!"
    },
    {
      "type": "textarea",
      "id": "newsletter_text",
      "label": "Newsletter text",
      "default": "stay in the loop with special offers, awesome deals and exclusive perks ðŸ˜Š"
    }
  ],
  "presets": [
    {
      "name": "Newsletter"
    }
  ]
}
{% endschema %}